{% extends 'enroll/base.html'%}
{%block content%}
{% load static %}
<style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }
    
    td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }
    
    .button {
  background-color: black; /* Green */
  border: none;
  color: white;
  padding: 6px 6px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 20px;
  margin: 4px 2px;
  transition-duration: 0.4s;
  cursor: pointer;
}

.button1 {
  background-color: black; 
  color: white; 
  border: 2px solid black;
  border-radius: 5px;
}

.button1:hover {
  background-color: white;
  color: black;
  border: 2px solid black;
}
  
@media print {
  #noPrint{
    display:none;
  }
}
    </style>
<div id="element" style="border: 1px solid black; padding: 10px;">
<img src="{% static 'enroll/tamam.jpg' %}" alt="Sunflower" style="float: left; margin-left: 15px; width:200px;height:200px;"><h1 style="text-align: center;">Tax Invoice   فاتورة ضريبية
    <img src="{{img.image.url}}" alt="can't show" style="float: right; margin-right: 15px; width:200px;height:200px;"></h1>
    <!-- table 1 for invoice number information  -->
    <table>
        <tr>
          <th>Invoice Number</th>
          <th>{{invoice_data.invoice_number}}</th>
          <th>{{invoice_data.invoice_number}}</th>
          <th>رقم الفاتورة</th>
        </tr>
      </table>
      <br>
      <!-- table 2 for date -->
      <table>
        <tr>
          <th>Invoice Issue Date</th>
          <th>{{invoice_data.date_time}}</th>
          <th>{{invoice_data.date_time}}</th>
          <th>تاريخ إصدار الفاتورة</th>
        </tr>
        <tr>
            <th>Date of Supply</th>
            <th>{{invoice_data.date_time}}</th>
            <th>{{invoice_data.date_time}}</th>
            <th>تاريخ التوريد</th>
          </tr>
      </table>
      <br>
      <!-- table 3 for seller and buyer  -->
      <table>
        <tr>
          <th>Seller</th>
          <th></th>
          <th></th>
          <th>تاجر</th>
          <th>Buyer</th>
          <th></th>
          <th></th>
          <th>مشتر</th>
        </tr>
        <tr>
            <td>Name</td>
            <td>{{invoice_data.bill_to_name}}</td>
            <td>{{invoice_data.bill_to_name}}</td>
            <td>فاتورة الاسم</td>
            <td>Name</td>
            <td>{{invoice_data.workshop_name}}</td>
            <td>{{invoice_data.workshop_name}}</td>
            <td>اسم الورشة</td>
          </tr>
          <tr>
            <td>Building No</td>
            <td>{{invoice_data.bill_to_building_no}}</td>
            <td>{{invoice_data.bill_to_building_no}}</td>
            <td>فاتورة لرقم المبنى</td>
            <td>Building No</td>
            <td>{{invoice_data.workshop_building_no}}</td>
            <td>{{invoice_data.workshop_building_no}}</td>
            <td>رقم مبنى الورشة</td>
          </tr>
          <tr>
            <td>Street Name</td>
            <td>{{invoice_data.bill_to_street_name}}</td>
            <td>{{invoice_data.bill_to_street_name}}</td>
            <td>فاتورة لاسم الشارع</td>
            <td>Street Name</td>
            <td>{{invoice_data.workshop_street_name}}</td>
            <td>{{invoice_data.workshop_street_name}}</td>
            <td>اسم شارع ورشة العمل</td>
          </tr>
          <tr>
            <td>District</td>
            <td>{{invoice_data.bill_to_disctrict}}</td>
            <td>{{invoice_data.bill_to_disctrict}}</td>
            <td>مشروع قانون للمقاطعة</td>
            <td>District</td>
            <td>{{invoice_data.workshop_disctrict}}</td>
            <td>{{invoice_data.workshop_disctrict}}</td>
            <td>منطقة ورشة العمل</td>
          </tr>
          <tr>
            <td>City</td>
            <td>{{invoice_data.bill_to_city}}</td>
            <td>{{invoice_data.bill_to_city}}</td>
            <td>فاتورة للمدينة</td>
            <td>City</td>
            <td>{{invoice_data.workshop_city}}</td>
            <td>{{invoice_data.workshop_city}}</td>
            <td>مدينة الورشة</td>
          </tr>
          <tr>
            <td>Country</td>
            <td>{{invoice_data.bill_to_country}}</td>
            <td>{{invoice_data.bill_to_country}}</td>
            <td>فاتورة للبلد</td>
            <td>Country</td>
            <td>{{invoice_data.workshop_country}}</td>
            <td>{{invoice_data.workshop_country}}</td>
            <td>بلد ورشة العمل</td>
          </tr>
          <tr>
            <td>Postal Code</td>
            <td>{{invoice_data.bill_to_postal_code}}</td>
            <td>{{invoice_data.bill_to_postal_code}}</td>
            <td>فاتورة للرمز البريدي</td>
            <td>Postal Code</td>
            <td>{{invoice_data.workshop_postal_code}}</td>
            <td>{{invoice_data.workshop_postal_code}}</td>
            <td>الرمز البريدي لورشة العمل</td>
          </tr>
          <tr>
            <td>Additional No</td>
            <td>{{invoice_data.bill_to_additional_no}}</td>
            <td>{{invoice_data.bill_to_additional_no}}</td>
            <td>فاتورة لرقم إضافي</td>
            <td>Additional No</td>
            <td>{{invoice_data.workshop_additional_no}}</td>
            <td>{{invoice_data.workshop_additional_no}}</td>
            <td>رقم ورشة العمل الإضافي</td>
          </tr>
          <tr>
            <td>VAT Number</td>
            <td>{{invoice_data.bill_to_vat_number}}</td>
            <td>{{invoice_data.bill_to_vat_number}}</td>
            <td>فاتورة لرقم ضريبة القيمة المضافة</td>
            <td>VAT Number</td>
            <td>{{invoice_data.workshop_vat_number}}</td>
            <td>{{invoice_data.workshop_vat_number}}</td>
            <td>رقم ضريبة القيمة المضافة لورشة العمل</td>
          </tr>
          <tr>
            <td>Other Seller ID</td>
            <td>{{invoice_data.bill_to_other_seller_id}}</td>
            <td>{{invoice_data.bill_to_other_seller_id}}</td>
            <td>معرف البائع الآخر</td>
            <td>Other Buyer ID</td>
            <td>{{invoice_data.workshop_other_seller_id}}</td>
            <td>{{invoice_data.workshop_other_seller_id}}</td>
            <td>معرف المشتري الآخر</td>
          </tr>
      </table>
      <br>

      <!-- table 4 for line items  -->
      {% if line_items %}
      <table>
        <tr>
          <th>Line Items</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th>البنود</th>
        </tr>
        <tr>
            <th>Nature of Goods or Services   طبيعة السلع أو الخدمات</th>
            <th>Unit Price   سعر الوحدة</th>
            <th>Quantity   كمية</th>
            <th>Taxable Amount   المبلغ الخاضع للضريبة</th>
            <th>Discount   تخفيض</th>
            <th>Tax Rate   معدل الضريبة</th>
            <th>Tax Amount   قيمة الضريبة</th>
            <th>Item Subtotal (Including VAT)   المجموع الفرعي للبند (متضمنًا ضريبة القيمة المضافة)</th>
          </tr>
          {% for bg in line_items %}
          <tr>
            <td>{{bg.nature}}</td>
            <td>{{bg.unit_price}}</td>
            <td>{{bg.quantity}}</td>
            <td>{{bg.taxable_amount}}</td>
            <td>{{bg.discount}}</td>
            <td>{{bg.tax_rate}}</td>
            <td>{{bg.tax_amount}}</td>
            <td>{{bg.item_sub_total_including_vat}}</td>
          </tr>
          {% endfor %}
      </table>
      {% endif %}
      <br>
      <table>
        <tr>
          <th>Total Amounts</th>
          <th></th>
          <th>المبالغ الإجمالية</th>
        </tr>
          <tr>
            <td>Total (Excluding VAT)</td>
            <td>value</td>
            <td>الإجمالي (باستثناء ضريبة القيمة المضافة)</td>
          </tr>
          <tr>
            <td>Discount</td>
            <td>value</td>
            <td>تخفيض</td>
          </tr>
          <tr>
            <td>Total Taxable Amount(Excluding VAT)</td>
            <td>value</td>
            <td>إجمالي المبلغ الخاضع للضريبة (باستثناء ضريبة القيمة المضافة)</td>
          </tr>
          <tr>
            <td>Total VAT</td>
            <td>value</td>
            <td>إجمالي ضريبة القيمة المضافة</td>
          </tr>
          <tr>
            <td>Total Amount Due</td>
            <td>value</td>
            <td>إجمالي المبلغ المستحق</td>
          </tr>
      </table>
</div>
<!-- <h6 id="noPrint">Fit the Invoice Data on the window size!</h6> -->
<!-- <input type="button" class="button button1" id="noPrint" value="Download Invoice" onclick="myFunction()"> -->
<input type="button" class="button button1" id="noPrint" value="Download Invoice" onclick="window.print();" id="noPrint">
  <!-- <button onclick="window.print();" id="noPrint">
  Print Me
  </button> -->
<script>
  let count = 0
    function myFunction() {
        
        let element = document.getElementById('element')
 html2pdf(element,{
    margin:10,
    filename:'output.pdf',
    image:{type:'jpeg',quality:0.98},
    html2canvas:{scale:2,logging:true,dpi:192,letterRendering:true},
    jsPDF:{unit:'cm',format:'a1',orientation:'portrait'}
 })
 count+=1
}
</script>
{%endblock content%}

<!-- show invoice : inner_width = 712 & inner_height = 623 -->
<!-- download invoice : inner_width = 703 & inner_height = 615  -->